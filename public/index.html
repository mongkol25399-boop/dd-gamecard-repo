<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>DD GAMECARD</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.json" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
  </head>
  <body>
    <button id="emergency-btn" onclick="forceResetGame()">‚ö†Ô∏è Reset</button>
    <button id="refresh-btn" onclick="window.location.reload()">
      üîÑ Refresh
    </button>

    <div id="disconnect-overlay" class="hidden">
      <div style="text-align: center; color: white">
        <h1 style="font-size: 3rem">üì°</h1>
        <h2>‡∏Ç‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠!</h2>
        <button class="btn-primary" onclick="window.location.reload()">
          ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà
        </button>
      </div>
    </div>

    <div id="app">
      <div id="landing-screen" class="screen">
        <div style="text-align: center; margin-top: 40px; width: 100%">
          <h1
            style="
              font-family: 'Kanit', sans-serif;
              font-weight: 900;
              line-height: 1;
              margin-bottom: 10px;
              text-transform: uppercase;
            "
          >
            <span
              style="
                font-size: 3rem;
                color: white;
                text-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
                display: block;
              "
              >DRINK DRUNK</span
            >
            <span
              style="
                font-size: 2.5rem;
                color: #fdcb6e;
                text-shadow: 0 0 15px rgba(253, 203, 110, 0.5);
                letter-spacing: 3px;
              "
              >GAMECARD</span
            >
          </h1>

          <img
            src="assets/icon.png"
            style="
              width: 85%;
              height: auto;
              max-width: 400px;
              border-radius: 20px;
              margin: 30px 0;
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
              object-fit: contain;
            "
          />
        </div>

        <div style="width: 100%; margin-top: auto; padding-bottom: 30px">
          <div id="create-room-area">
            <button
              onclick="goToSetup()"
              class="btn-primary"
              style="
                background: linear-gradient(45deg, #00b894, #0984e3);
                font-size: 1.5rem;
                padding: 20px;
                border: none;
                box-shadow: 0 0 25px rgba(0, 184, 148, 0.4);
              "
            >
              ‚ûï ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏á‡πÄ‡∏´‡∏•‡πâ‡∏≤
            </button>
            <p
              style="
                color: #aaa;
                text-align: center;
                margin-top: 15px;
                font-size: 0.9rem;
              "
            >
              (‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô Host)
            </p>
          </div>

          <div id="join-room-area" class="hidden">
            <p
              style="
                color: #fdcb6e;
                text-align: center;
                font-size: 1.2rem;
                margin-bottom: 15px;
                font-weight: bold;
              "
            >
              ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà!
            </p>
            <button
              onclick="joinRoom()"
              class="btn-primary"
              style="
                background: #0984e3;
                border: 2px solid #74b9ff;
                padding: 20px;
                font-size: 1.2rem;
              "
            >
              üëâ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏ß‡∏á‡∏Ç‡∏≠‡∏á
              <span
                id="host-name-display"
                style="color: #fff; font-weight: bold"
                >...</span
              >
            </button>
          </div>
        </div>
      </div>

      <div id="setup-screen" class="screen hidden">
        <h1 class="logo-text">üç∫ DD GAMECARD</h1>
        <div class="input-group">
          <input
            type="text"
            id="new-player-name"
            placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô..."
            onkeypress="handleEnter(event)"
          />
          <button onclick="addNameToList()" class="btn-add">+</button>
        </div>
        <div class="setup-list-container">
          <p style="color: #aaa; font-size: 0.8rem; margin-bottom: 5px">
            ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
          </p>
          <div id="setup-list"></div>
        </div>
        <button
          onclick="setupGame()"
          class="btn-primary"
          style="margin-top: auto"
        >
          ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô / ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á
        </button>
      </div>

      <div id="lobby-screen" class="screen hidden">
        <h1>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á</h1>
        <div id="lobby-list"></div>
        <div
          id="host-controls"
          class="hidden"
          style="width: 100%; display: flex; flex-direction: column; gap: 10px"
        >
          <p style="color: #aaa; font-size: 0.9rem; margin-top: 5px">
            ‡∏£‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô...
          </p>
          <button
            id="start-btn"
            onclick="startGame()"
            class="btn-start"
            disabled
          >
            ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
          </button>
          <button
            onclick="goBackToSetup()"
            class="btn-secondary"
            style="border-color: #e17055; color: #e17055"
          >
            ‚¨ÖÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ / ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ô
          </button>
          <div id="kick-list" class="hidden">
            <h3 style="font-size: 1rem; color: #aaa">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ô (‡∏•‡∏ö‡∏ä‡∏∑‡πà‡∏≠)</h3>
            <div id="kick-container"></div>
          </div>
        </div>
      </div>

      <div id="game-screen" class="screen hidden game-layout">
        <div id="top-bar">
          <div id="turn-info-box">
            <div id="current-turn-name">‡∏ï‡∏≤‡∏Ç‡∏≠‡∏á...</div>
          </div>
          <div id="deck-count-box">
            <span id="deck-count">52 ‡πÉ‡∏ö</span>
          </div>
        </div>

        <div id="card-area">
          <div id="card-container">
            <img id="main-card-img" src="assets/back.png" alt="Card" />
            <div id="card-message" class="hidden"></div>
          </div>
        </div>

        <div id="bottom-split">
          <div id="player-list-container">
            <div id="in-game-list"></div>
          </div>
          <div id="action-btn-container">
            <button id="main-btn" onclick="handleMainAction()">‡∏£‡∏≠...</button>
            <button
              id="alt-btn"
              onclick="requestMinigameMode()"
              class="btn-secondary hidden"
            >
              üîÑ ‡πÄ‡∏Å‡∏°
            </button>
          </div>
        </div>
      </div>

      <div id="overlay" class="hidden">
        <div id="overlay-content">
          <h2 id="overlay-title">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</h2>
          <div id="overlay-body"></div>
          <button id="overlay-close" onclick="closeOverlay()" class="hidden">
            ‡∏õ‡∏¥‡∏î
          </button>
        </div>
      </div>

      <div id="bomb-overlay" class="hidden">
        <div class="bomb-content">
          <h1 style="font-size: 3rem; color: #ff7675">üí£ ‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡πÄ‡∏ß‡∏•‡∏≤!</h1>
          <div id="bomb-status" style="font-size: 1.5rem; margin: 20px 0">
            ‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà...
          </div>
          <div id="bomb-icon">üí£</div>
          <button
            id="pass-bomb-btn"
            class="btn-primary hidden"
            onclick="passBomb()"
          >
            ‡πÇ‡∏¢‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î! üí®
          </button>
        </div>
      </div>
    </div>

    <audio id="sound-draw" src="assets/draw.mp3"></audio>
    <audio id="sound-alert" src="assets/alert.mp3"></audio>
    <audio id="sound-win" src="assets/win.mp3"></audio>
    <audio id="sound-click" src="assets/click.mp3"></audio>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
  </body>
</html>
